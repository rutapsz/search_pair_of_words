---
title: search_pair_of_words
description: Приложение для анализа текстового файла и подсчета количества пар слов, которые находятся на заданном расстоянии друг от друга.
author: Gureev Vitalii
ms.date: 2024-11-26
---
# search_pair_of_words

Это приложение на C++ предназначено для анализа текстового файла и подсчета количества пар слов, которые находятся на заданном расстоянии друг от друга. Приложение использует регулярные выражения для токенизации текста и выполняет проверку входных данных перед выполнением анализа. Пары слов учитываются в подсчете только один раз, благодаря хранению уже подсчитанных слов в векторе.

## Описание

Программа считывает текстовый файл и ищет все вхождения заданных слов, которые находятся на заданном расстоянии друг от друга. Приложение поддерживает работу с текстами на русском языке и выполняет проверку на корректность входных параметров, таких как название файла, слова и расстояние. Также она отслеживает уже подсчитанные пары слов, чтобы избежать повторного их учета.

## Синтаксис

analyze_text <имя_файла> <слово1> <слово2> <расстояние>


- `<имя_файла>` — путь к текстовому файлу, который будет анализироваться.
- `<слово1>` — первое слово, для поиска пар.
- `<слово2>` — второе слово, для поиска пар.
- `<расстояние>` — максимальное количество слов между парой слов.

## Параметры

| Параметр        | Описание                                                                                         |
|------------------|--------------------------------------------------------------------------------------------------|
| `<имя_файла>`    | Путь к текстовому файлу для анализа. Файл должен быть в формате UTF-8.                          |
| `<слово1>`       | Первое слово для поиска. Поддерживаются только буквы (русский и латинский алфавит).              |
| `<слово2>`       | Второе слово для поиска. Поддерживаются только буквы (русский и латинский алфавит).              |
| `<расстояние>`   | Максимальное расстояние между словами. Значение должно быть целым числом и не может быть отрицательным. |

## Описание работы программы

1. Программа читает ввод с консоли, который должен содержать имя файла, два слова и расстояние между ними.
2. Входные данные проверяются на корректность:
   - Имя файла должно быть строкой.
   - Слова должны содержать только буквы.
   - Расстояние должно быть целым положительным числом.
3. Программа открывает указанный файл и анализирует его построчно, разбивая текст на отдельные слова с помощью регулярных выражений.
4. Программа ищет все пары слов, где одно слово встречается на заданном расстоянии от другого. При этом каждая пара слов учитывается только один раз.
5. Программа выводит количество найденных пар.

## Ошибки

Если ввод неверен, программа выведет соответствующее сообщение об ошибке:

- **Ошибка во входных параметрах** — если параметры заданы некорректно.
- **Расстояние отрицательное** — если указано отрицательное расстояние.
- **Расстояние нецелое** — если расстояние не является целым числом.
- **В словах недопустимые символы** — если одно из слов содержит недопустимые символы.
- **Не удалось открыть файл** — если не удалось открыть указанный файл.

## Функции

### `vector<wstring> tokenize(const wstring& text)`

Функция токенизирует строку текста, разбивая ее на слова с помощью регулярного выражения. Возвращает вектор слов.

#### Параметры

- `text` — строка текста для токенизации.

#### Возвращаемое значение

Возвращает вектор слов типа `wstring`.

### `bool isAllLetters(const wstring& str)`

Функция проверяет, состоит ли строка только из букв (русских или латинских).

#### Параметры

- `str` — строка для проверки.

#### Возвращаемое значение

Возвращает `true`, если строка состоит только из букв, иначе — `false`.

### `int main()`

Основная функция программы, которая выполняет следующие задачи:
1. Чтение входных данных.
2. Проверка корректности параметров.
3. Чтение и обработка файла.
4. Поиск и подсчет уникальных пар слов, находящихся на заданном расстоянии друг от друга.

В программе используется вектор `used`, чтобы отслеживать уже подсчитанные слова и избегать повторного учета одинаковых пар слов.

## Примечания

- Программа поддерживает работу с файлами в кодировке UTF-8.
- Для корректной работы с русскими символами программа использует локаль `ru_RU.UTF-8`.
- Все входные данные (имя файла, слова, расстояние) должны быть переданы через командную строку в нужном формате.

## Пример вызова программы

### Пример 1: Анализ текста с корректными параметрами

Есть текстовый файл `text.txt` с содержимым:
Привет мир! Это тестовое приложение для анализа текста. Мир это тест, это полезное приложение.

запускаем программу с параметрами:

analyze_text text.txt мир приложение 3

**Вывод:**

1

### Пример 2: Анализ текста с корректными параметрами

Есть текстовый файл `text.txt` с содержимым:
Привет мир! Это мир тест, мир полезное приложение.
Мир это приложение, мир тест, мир приложение.

запускаем программу с параметрами:

analyze_text text.txt мир приложение 10

**Вывод:**

3


## Связанные материалы

- [C++ std::regex Documentation](https://en.cppreference.com/w/cpp/regex)  
- [Как работать с файлами в C++](https://en.cppreference.com/w/cpp/io/fstream)
